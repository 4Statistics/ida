<style>@import url(style.css);</style>
<small>[Introduction to Data Analysis](index.html)</small>

# 1.2. Installing RStudio

Packages and other aspects of R are easier to handle in [RStudio](http://rstudio.org/), a software interface for R that adds many useful features to R. A work session in RStudio that takes advantage of all these capabilities will look like this (click to zoom):
  
[![An example work session in RStudio.](images/rstudio-screenshot.png)](images/rstudio-screenshot.png)

RStudio is very quickly developing into a powerhouse for R users, with [more features](http://www.rstudio.com/ide/) than we will be able to show. One of the most recent developments allows to [build web applications](http://www.rstudio.com/shiny/) on top of R code, directly from RStudio.

## Installation

Use [this link](http://www.rstudio.com/ide/download/desktop) to download RStudio. Installation should then be pretty straightforward. You will be installing the Desktop version -- the other one is for running RStudio on a server, while you will be running it as a desktop program.

RStudio comes with [excellent documentation](http://www.rstudio.com/ide/docs/) available through the Help menu. The same menu will also show you [keyboard shortcuts](http://www.rstudio.com/ide/docs/using/keyboard_shortcuts), which will quickly come in handy. The sections below cover only the essentials, which should be enough to get started.

## A quick tour of the interface

When you open RStudio for the first time, you see something like the screenshot below.

[![RStudio interface.](images/rstudio-interface-1.png)](images/rstudio-interface-1.png)

The red circle designates the Console window, where you get to type commands and see their results. The blue circle designates the Workspace, where your objects appear. The purple circle designates a bunch of other windows for files, plots, packages and help.

Most of the time, you will actually have one more window open on the left side of the screen to view and execute R scripts. Press &#8984;-&#8679;-N (Mac) or `Ctrl-Shift-N` (Win) to open a blank R script, or use the icon shortcut:

![RStudio new script.](images/rstudio-new-script.png)

Now copy-paste [this code](https://raw.github.com/briatte/ida/master/code/12_playground.R) into the blank R script, select it all, and run. You will see results get printed out (in black) in the Console, along with the code (in blue). Objects will also appear in the Workspace, and a plot will appear in the bottom-right quadrant (yay! plots!).

## Setting the working directory

Let's now save the script. Click the tab in the bottom-right quadrant called "Files". Choose the folder where you want to store files for this course -- create it if necessary. Then, set it as the working directory through the "More" menu, as shown below:

![RStudio new script.](images/rstudio-setwd.png)

The working directory is the default location on your computer where R looks for stuff. RStudio copied that location to the Console when you completed the step described above, as if you had run the `setwd` command, which sets the working directory to a given folder path.

```{r setwd, eval=FALSE}
setwd("~/Documents/Teaching/IDA")
```

You can now save your script: focus on it by clicking anywhere in its window, press &#8984;-S (Mac) or `Ctrl-S` (Win), and RStudio will offer to save it in your course folder.  Finally, set your course folder as the default working directory in RStudio's preferences.

## Tab auto-completion

Now that the script is saved, take a minute or two to explore the code from the keyboard. Get used to run your code from a script file, and tinker it from the Console. Get as much practice with keyboard editing and shortcuts as you can.

Another feature of RStudio (and R) is tab auto-completion: type in the first letters of a command and press `Tab`: possible command names will appear. The example below shows how to reach the `install.packages()` command through tab auto-completion:

![RStudio auto-completion.](images/rstudio-autocompletion.png)

## Drawing and saving plots

One last functionality that we want to show as part of the RStudio interface has to do with plots. Let's take inspiration from a [quick introduction to `ggplot2`](http://blog.echen.me/2012/01/17/quick-introduction-to-ggplot2/), a graphics package that you should have [previously](11_r.html) installed when trying out package installation in R.

```{r ggplot2-load-package}
# In case you have not yet installed ggplot2, this will.
if(!"ggplot2" %in% installed.packages()[,1])
  install.packages("ggplot2")
# Now load the ggplot2 package.
library(ggplot2)
```

We'll be looking at some example data included in the R software. The data describes a set of fifty flowers studied by famous statistician Ronald Fisher in an article published in 1936. The data itself were collected by Edgar Anderson and published a year before.

```{r ggplot2-load-data}
# Look at first rows of a default dataset.
head(iris)
```

Let's now use the 'quick plot' functionality of the `ggplot2` package. The command `qplot` requires three arguments here: the data to use, one variable to plot on the horizontal x-axis, and another to plot on the vertical y-axis.

```{r ggplot2-qplot}
# Quick plot.
qplot(data = iris, x = Sepal.Length, y = Petal.Length)
```

We will come back to how `ggplot2` works in due time; for the moment, let's simply improve the plot by adding a bunch of options that will add some color, sizing and transparency effects to the plot that opened in the bottom-right quadrant.

```{r ggplot2-3, tidy=FALSE}
# Select all elements to run properly.
qplot(data = iris, 
      x = Sepal.Length, 
      y = Petal.Length, 
      color = Species, 
      size = Petal.Width, 
      alpha = I(0.7))
```

This plot can be saved to PNG (a [bitmap](https://en.wikipedia.org/wiki/Raster_graphics) format) or PDF (a [vector](https://en.wikipedia.org/wiki/Vector_graphics) format) from the "Export" menu. You will want to use PNG if you are saving the plot for screen viewing, e.g. posting on a Web page. Otherwise, you will prefer to export the plot as PDF, as shown below.

![RStudio export plot.](images/rstudio-save-plot.png)

RStudio will open a window to ask you for a few details, such as the filename for the exported graphic. The default saving location will be your working directory. After the plot is exported, it will open in your default PDF viewer, so that you can check everything went well.

## Updates

RStudio is frequently improved, and you might want to upgrade your version to make sure that you keep the software on its latest version. On Mac OS X, the "Check for updates" item is located in the "Help" menu.

The first course email that circulated asked you to install RStudio 0.97.248, but there was a funny coincidence: RStudio was updated on the day we started the class. You can stick with the version of RStudio that you installed: it should not have any impact on the course.

## Troubleshooting

There's a few [known issues](http://support.rstudio.org/help/kb/troubleshooting/troubleshooting-guide-using-rstudio) with RStudio. For instance, Mac OS X users with older 32-bit processors from circa 2009 will have to use an old version that is not available any more: ask us for a copy of it.

There might be more issues floating around, but our experience with RStudio has been mostly bug-free, so let's keep the picture rosy for now.

> __Next__: [Help pages](13_help.html).
