<style>@import url(style.css);</style>
[Introduction to Data Analysis](index.html "Course index")

# 11. Networks

-0 random network / Grey's Anatomy / bipartite
-1 edges / twitter networks / diseasome
-2 words

http://is-r.tumblr.com/post/37901909845/everything-is-a-network-featuring-the-sna-package

Networks are a common aspect of your daily life, and since you have been logging your network of friends and colleagues on services like Facebook or [LinkedIn](http://inmaps.linkedinlabs.com/), there are tons of data available. There is also a large amount of research on networks with [tough questions](http://masi.cscs.lsa.umich.edu/~crshalizi/weblog/773.html), such as the analytical difference between homophily (connecting to those like us) and contagion (becoming like our connections). We will stick to description and simple measures of influence.

There are several software options for network analysis, like [Gephi](https://gephi.org/), [Pajek](http://quanti.hypotheses.org/512/) or [VOSON](http://voson.anu.edu.au/) (for hyperlink networks). We will stay in R and use the `sna` and `igraph` libraries, which use [different but compatible formats](http://groupefmr.hypotheses.org/363) to store network data. Some examples will be taken from [Baptiste Coulmont's graphs](http://coulmont.com/index.php?s=igraph) of small cliques.

## A random network

```{r setup-networks, echo=FALSE, message=FALSE}
require(igraph)
```

We'll start with [simulating a random network](http://www.econometricsbysimulation.com/2012/10/simulating-social-network-data.html) of $n = 30$ individuals (`ego`), for which we simulate a bidirectional friendship relationship: if individual 'Ego' is a friend of individual 'Alter', then the reciprocal is true. Each individual has the possibility to associate with any other individual in the network, resulting in a network matrix of $30^2 = 900$ rows, with one extra row per individual that connects it to itself ($n-n$) and that will be ignored when generating relationships. The result is the `rnet` dataset.

```{r smart-random-network-1, echo=FALSE}
# Set network size.
n <- 30
# Create n series of n.
ego <- rep(1:n,each=n)
# Create n sequences of n.
alter <- rep(1:n,times=n)
# Default to no friendship between ego and alter.
friendship <- 0
# Assemble dataset.
rnet <- data.frame(ego, alter, friendship)
```

```{r smart-random-network-2}
head(rnet)
```

To generate random relationships, we draw from a binomial distribution where the probability of a friendship is artificially set to $Pr(friendship) = .15$. The result is a network that displays approximately 15% of all possible `friendship` ties in the `rnet` dataset.

```{r smart-random-network-3, echo=FALSE}
conDen <- .15
for (i in 1:n)
  for (ii in (i+1):n)
    if ((rbinom(1,1,conDen)==1)&(i!=ii)) {
      # print(paste(i,ii))
      rnet$friendship[(rnet$ego==i & rnet$alter==ii)] <- 1
      rnet$friendship[(rnet$ego==ii & rnet$alter==i)] <- 1
      }
```

```{r smart-random-network-4}
summary(rnet)
```

The network is drawn with the `igraph` library. The plot function processes the subset of the `rnet` data frame for which the `friendship` variable indiciates that there is a relationship to draw. The ties are undirected: there are no arrows between the nodes because the friendship ties are strictly reciprocal.

```{r smart-randomnetwork-5}
plot(graph.data.frame(rnet[rnet$friendship==1,], directed=F), main="Purely Random Connections")
```

## A fictional network

http://www.r-bloggers.com/grey%E2%80%99s-anatomy-network-of-sexual-relations/

## A real-world network

Finally, for a real-world example of network data, turn to Solomon Messing's analysis of [U.S. student affiliations](https://solomonmessing.wordpress.com/2012/09/30/working-with-bipartiteaffiliation-network-data-in-r/). The next pages show other examples to illustrate [measures of influence][111] and [word associations as networks][112].

[111]: 111_influence.html
[112]: 112_networkds.html

> __Next__: [Influence](111_influence.html).
